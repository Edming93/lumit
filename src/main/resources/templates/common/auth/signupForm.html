<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments/head :: headFragment}"></th:block>
    <title>로그인 | LUMIT</title>
    <script th:inline="javascript">
        let message = [[${message}]];
        if (message) {
            alert(message);
        }
        let errorMessage = [[${errorMessage}]];
        if (errorMessage) {
            alert(errorMessage);
        }
    </script>
</head>
<div class="userFormBg">
    <div class="userFormWrapper">
        <p>LUMIT</p>
        <form class="formContainer" action="/member/createUser" method="post" th:object="${tbLogin}">
            <input type="hidden" name="roleId" value="3">
            <input type="hidden" th:field="*{socialId}">
            <div>
                <label id="userId" th:for="userId">아이디</label>
                <input type="text" th:field="*{userId}" placeholder="아이디를 입력해주세요.">
                <p th:if="${#fields.hasErrors('userId')}" th:errors="*{userId}" class="fieldError">Incorrect Data</p>
            </div>
            <div>
                <label th:for="name">이름</label>
                <input id="name" type="text" th:field="*{name}" placeholder="이름을 입력해주세요.">
                <p th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="fieldError">Incorrect Data</p>
            </div>
            <div>
                <label for="email">이메일</label>
                <input id="email" type="email" th:field="*{email}" placeholder="이메일 주소를 입력해주세요.">
                <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="fieldError">Incorrect Data</p>
            </div>
            <div class="passwordWrapper">
                <label for="password">비밀번호 설정</label>
                <input id="password" type="password" th:field="*{password}" name="password"
                       placeholder="8자 이상 16자 이하의 비밀번호를 입력해주세요."
                       autocomplete="current-password"/>
                <div id="hide" onclick="togglePwd(event)"><i class="fa-regular fa-eye-slash"></i>
                </div>
                <div id="show" class="hide" onclick="togglePwd(event)"><i class="fa-regular fa-eye"></i></div>
            </div>
            <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="fieldError">Incorrect
                Data</p>
            <fieldset>
                <legend>성별</legend>
                <div>
                    <input type="radio" id="female" th:field="*{genderCd}" value="1" checked="checked"/>
                    <label for="female">여성</label>
                </div>

                <div>
                    <input type="radio" id="male" th:field="*{genderCd}" value="2"/>
                    <label for="male">남성</label>
                </div>
                <p th:if="${#fields.hasErrors('genderCd')}" th:errors="*{genderCd}" class="fieldError">Incorrect
                    Data</p>
            </fieldset>
            <div>
                <label for="address">주소</label>
                <input id="address" type="text" th:field="*{address}" placeholder="주소를 입력해주세요.">
                <p th:if="${#fields.hasErrors('address')}" th:errors="*{address}" class="fieldError">Incorrect Data</p>
            </div>
            <div>
                <label for="phone">연락처</label>
                <input id="phone" type="tel" th:field="*{phone}" placeholder="연락처를 입력해주세요.">
                <p th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="fieldError">Incorrect Data</p>
            </div>
            <button type="submit">회원가입</button>
            <a class="helpLink" th:href="@{/login}">이미 가입하셨나요?</a>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        </form>
    </div>
</div>
<script th:inline="javascript">
    function textChange() {

    }

    function togglePwd(event) {
        event.preventDefault();
        const pwd = document.getElementById("password");
        const state = pwd.getAttribute("type");
        if (state === "password") {
            document.getElementById("hide").setAttribute("class", "hide");
            document.getElementById("show").removeAttribute("class");
            pwd.setAttribute("type", "text")
        } else {
            document.getElementById("show").setAttribute("class", "hide");
            document.getElementById("hide").removeAttribute("class");
            pwd.setAttribute("type", "password")
        }
        return false;
    }
</script>
</html>