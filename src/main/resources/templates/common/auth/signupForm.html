<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{fragments/layout}"
>
<head>
    <th:block th:replace="~{fragments/head :: headFragment}"></th:block>
    <title>로그인 | LUMIT</title>
    <script th:inline="javascript">
        let message = [[${message}]];
        if (message) {
            alert(message);
        }
        let errorMessage = [[${errorMessage}]];
        if (errorMessage) {
            alert(errorMessage);
        }

        function checkPwd() {
            const pwd = document.getElementById("password");
            const pwdCheck = document.getElementById("passwordCheck");
            if (pwd.value !== pwdCheck.value) {
                pwdCheck.value = "";
                alert("비밀번호가 일치하지 않습니다.")
            }
        }
    </script>
</head>
<div class="userFormBg" layout:fragment="content">
    <p class="registerTitle">회원가입</p>
    <form class="formContainer" action="/member/createUser" method="post" th:object="${tbLogin}">
        <input type="hidden" name="roleId" value="3">
        <input type="hidden" th:field="*{socialId}">
        <div class="formHeader">
            <div>기본정보</div>
            <div class="requiredDot">&#8226;&nbsp;필수 입력 사항</div>
        </div>
        <hr class="divider">
        <div class="inputContainer">
            <div style="display: inline-flex">
                <label id="userId" th:for="userId">아이디</label>
                <div class="requiredDot">&nbsp;&#8226;</div>
            </div>
            <input type="text" th:field="*{userId}" placeholder="영문 소문자/숫자, 4~16자" class="formInput">
            <p th:if="${#fields.hasErrors('userId')}" th:errors="*{userId}" class="fieldError">Incorrect Data</p>
        </div>
        <div class="inputContainer">
            <div style="display: inline-flex">
                <label for="password">비밀번호</label>
                <div class="requiredDot">&nbsp;&#8226;</div>
            </div>
            <input id="password" type="password" th:field="*{password}" name="password"
                   placeholder="영문/숫자/특수문자 중 2가지 이상 조합, 8자~16자"
                   autocomplete="current-password" class="formInput"/>
        </div>
        <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="fieldError">Incorrect
            Data</p>
        <div class="inputContainer">
            <div style="display: inline-flex">
                <label for="password">비밀번호 확인</label>
                <div class="requiredDot">&nbsp;&#8226;</div>
            </div>
            <input id="passwordCheck" onblur="checkPwd()" class="formInput" type="password"/>
        </div>
        <div class="inputContainer">
            <div style="display: inline-flex">
                <label th:for="name">이름</label>
                <div class="requiredDot">&nbsp;&#8226;</div>
            </div>
            <input id="name" type="text" th:field="*{name}" class="formInput" placeholder="이름을 입력해주세요.">
            <p th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="fieldError">Incorrect Data</p>
        </div>

        <fieldset class="radioContainer">
            <div style="display: inline-flex">
                <legend for="genderCd">성별</legend>
                <div class="requiredDot">&nbsp;&#8226;</div>
            </div>
            <div class="radioInput">
                <div>
                    <input class="radioBtn" type="radio" id="female" th:field="*{genderCd}" value="1"
                           checked="checked"/>
                    <label for="female">여성</label>
                </div>

                <div>
                    <input class="radioBtn" type="radio" id="male" th:field="*{genderCd}" value="2"/>
                    <label for="male">남성</label>
                </div>
            </div>
            <p th:if="${#fields.hasErrors('genderCd')}" th:errors="*{genderCd}" class="fieldError">Incorrect
                Data</p>
        </fieldset>
        <div class="inputContainer">
            <div style="display: inline-flex">
                <label>휴대폰</label>
                <div class="requiredDot">&nbsp;&#8226;</div>
            </div>
            <div class="phoneInput">
                <select>
                    <option value="010">010</option>
                    <option value="011">011</option>
                    <option value="016">016</option>
                    <option value="017">017</option>
                    <option value="019">019</option>
                </select>
                -
                <input type="text" pattern="[0-9]{4}">
                -
                <input type="tel">
            </div>
            <!--            <input id="phone" type="tel" th:field="*{phone}" placeholder="연락처를 입력해주세요.">-->
            <p th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="fieldError">Incorrect Data</p>
        </div>
        <div class="inputContainer">
            <div style="display: inline-flex">
                <label for="email">이메일</label>
                <div class="requiredDot">&nbsp;&#8226;</div>
            </div>
            <input id="email" type="email" class="formInput" th:field="*{email}" placeholder="이메일 주소를 입력해주세요.">
            <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="fieldError">Incorrect Data</p>
        </div>
        <div class="addressContainer">
            <div>
                <label for="address">주소</label>
                <div>
                    <input
                            type="text"
                            placeholder=""
                            disabled
                            id="zonecode"
                    />
                    <button id="search-btn">
                        우편번호 찾기
                    </button>
                </div>
                <input
                        type="text"
                        disabled
                        id="roadAddress"
                />
                <input
                        type="text"
                        id="address" th:field="*{address}"
                        placeholder="상세주소를 입력해주세요."
                />
                <button id="registerBtn">주소 등록하기</button>
            </div>
            <p th:if="${#fields.hasErrors('address')}" th:errors="*{address}" class="fieldError">Incorrect Data</p>
            <div class="checkBoxContainer">
                <input id="defaultDeliveryAddr" type="checkbox"><label for="defaultDeliveryAddr">기본 배송지로 저장</label>
            </div>
        </div>

        <button type="submit">회원가입</button>
        <a class="helpLink" th:href="@{/login}">이미 가입하셨나요?</a>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
    </form>
</div>
</html>