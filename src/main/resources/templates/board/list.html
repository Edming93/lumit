<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{admin/fragments/layout}"
>
<head>

</head>
<div layout:fragment="content">
    <div>
        <p class="title">공지사항</p>
    </div>

    <div id="container">

		<div class="btnArea">
			<div class="btnLeftArea"></div>
			<div class="btnRightArea">
				<input type="text" id="searchInp" placeholder="게시글 제목 검색" th:value="${title}" class="comm_inp size300">
	            <button type="button" id="registBtn" class="commBtn mgl10">글쓰기</button>
            </div>
        </div>
        
        <table class="boardTable mgt20">
            <colgroup>
                <col style="width: 7%;"/>
                <col style="width: auto;"/>
                <col style="width: 10%;"/>
                <col style="width: 10%;"/>
                <col style="width: 8%;"/>
            </colgroup>
            <thead>
            <tr>
                <th class="alCenter">No.</th>
                <th class="alCenter">제목</th>
                <th class="alCenter">작성자</th>
                <th class="alCenter">등록일</th>
                <th class="alCenter">조회</th>
            </tr>
            </thead>
            <tbody>
	            <tr th:each="board, stat :${boardList}">
	                <td class="alCenter">
	                	<span th:text="${stat.size - stat.index}"></span>
	                </td>
	                <td class="alLeft" style="color: #515151; font-size:17px;">
	                	<a href="javascript:void(0);" th:onClick="moveDetail([[${board.boardId}]]);">
	                		<span th:text="${board.title}"></span>
	                	</a>
	                </td>
	                <td class="alCenter" style="color: #515151; font-size:17px;">
	                	<span th:text="${board.regId}"></span>
	                </td>
	                <td class="alCenter">
	                	<span th:text="${@StringUtils.setDateFormat(board.regDt)}"></span>
	                </td>
	                <td class="alCenter">
	                	<span th:text="${board.viewCount}"></span>
	                </td>
	            </tr>
            </tbody>
        </table>
    </div>
<script th:inline="javascript">
	let menuCd = [[${menuCd}]];
	console.log("menuCd ::: "+menuCd);
	
	document.addEventListener("DOMContentLoaded", function () {	
		
		document.getElementById("registBtn").addEventListener("click",function() {
			moveUrl("/"+siteId+"/board/"+menuCd+"/regist");
		});
		
		document.getElementById("searchInp").addEventListener('keydown', function(event) {
			if(event.key === 'Enter') {
				const query = event.target.value;
				
				let params = {};
				
				params['title'] = query;
				
				moveUrl("/"+siteId+"/board/"+menuCd+"/list",params);
			}
		});
		
	});
	
	
	function moveDetail(boardId) {
		moveUrl("/"+siteId+"/board/"+menuCd+"/detail/"+boardId);
	}
</script>
</div>

</html>